<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>InnerGlow | Treatments & Therapies</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #e0f7fa, #f3e5f5);
      margin: 0;
      display: flex;
    }
    /* Sidebar */
    .sidebar {
      width: 70px;
      background: linear-gradient(to bottom, #6a11cb, #2575fc);
      color: white;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      padding-top: 20px;
      display: flex;
      flex-direction: column;
      transition: width 0.3s;
      overflow: hidden;
      z-index: 1000;
    }
    .sidebar.expanded { width: 250px; }
    .sidebar h2 { font-size: 1.6rem; text-align: center; margin-bottom: 30px; font-weight: bold; opacity: 0; transition: opacity 0.3s; }
    .sidebar.expanded h2 { opacity: 1; }
    .sidebar a { color: white; text-decoration: none; padding: 12px 20px; display: flex; align-items: center; font-weight: 500; transition: all 0.3s; }
    .sidebar a i { min-width: 25px; font-size: 1.2rem; }
    .sidebar.expanded a span.label { display: inline; margin-left: 12px; }
    .sidebar a span.label { display: none; }
    .sidebar a:hover { background: rgba(255,255,255,0.2); border-radius: 10px; }
    .logout-btn { margin-top: auto; background: #e74c3c; color: white; font-weight: bold; text-align: center; padding: 12px; border-radius: 8px; margin: 20px; display: flex; align-items: center; justify-content: center; }
    .sidebar.expanded .logout-btn { width: auto; }
    .logout-btn:hover { background: #c0392b; }

    /* Main content */
    .content { margin-left: 70px; padding: 40px 20px; width: calc(100% - 70px); transition: margin-left 0.3s; }
    .sidebar.expanded ~ .content { margin-left: 250px; }

    /* Toggle icon */
    .dashboard-icon { position: fixed; top: 20px; left: 10px; font-size: 1.8rem; color: #fff; cursor: pointer; z-index: 1100; transition: left 0.3s, color 0.3s; }
    .sidebar.expanded ~ .dashboard-icon { left: 260px; color: #6a11cb; }

    /* Therapy cards */
    .therapy-card { background: #fff; border-radius: 15px; padding: 25px; margin-bottom: 20px; box-shadow: 0 6px 15px rgba(0,0,0,0.08); transition: transform 0.3s, box-shadow 0.3s; display: flex; align-items: flex-start; cursor: pointer; }
    .therapy-card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.15); }
    .therapy-card i { font-size: 2rem; color: #6a11cb; margin-right: 15px; margin-top: 5px; }
    .therapy-card h4 { font-weight: 600; margin-bottom: 10px; color: #333; }
    .therapy-card p { color: #555; margin: 0; }
    .therapy-card .details { display: none; margin-top: 10px; color: #444; }
    .therapy-card .details ul { padding-left: 20px; margin: 0; }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <h2>InnerGlow</h2>
  <a href="index.html"><i class="fas fa-home"></i> <span class="label">Home</span></a>
  <a href="about_me.html"><i class="fas fa-user"></i> <span class="label">About Me</span></a>
  <a href="screening.html"><i class="fas fa-file-medical-alt"></i> <span class="label">Screening</span></a>
  <a href="tracking.html"><i class="fas fa-chart-line"></i> <span class="label">Track Progress</span></a>
  <a href="appointments.html"><i class="fas fa-calendar-check"></i> <span class="label">Appointments</span></a>
  <a href="admin.html"><i class="fas fa-user-shield"></i> <span class="label">Admin</span></a>
  <a href="treatments&terapies.html"><i class="fas fa-hand-holding-medical"></i> <span class="label">Treatments & Therapies</span></a>
  <a href="logout.html" class="logout-btn"><i class="fas fa-sign-out-alt"></i> <span class="label">Logout</span></a>
</div>

<i class="fas fa-bars dashboard-icon" id="dashboardToggle"></i>

<!-- Main Content -->
<div class="content">
  <div class="container">
    <h1 class="text-center mb-4"><i class="fas fa-hand-holding-medical"></i> Treatments & Therapies</h1>

    <!-- Personalized Choice -->
    <div class="therapy-card">
      <i class="fas fa-user"></i>
      <div>
        <h4>Your Personal Stress Buster</h4>
        <p>Select what relaxes you the most, and get personalized suggestions.</p>
        <select id="activitySelect" class="form-select mt-2" multiple></select>
        <div id="activityTip" class="mt-3 text-primary fw-bold"></div>
      </div>
    </div>

    <!-- Daily Coping Tip -->
    <div class="therapy-card bg-light">
      <i class="fas fa-lightbulb text-warning"></i>
      <div>
        <h4>Daily Coping Tip</h4>
        <p id="dailyTip" class="fw-semibold text-dark">Loading tip...</p>
      </div>
    </div>

    <!-- Therapy Cards Container -->
    <div id="therapyCardsContainer"></div>

  </div>
</div>

<script>
  // Sidebar toggle
  const sidebar = document.getElementById("sidebar");
  document.getElementById("dashboardToggle").addEventListener("click", () => {
    sidebar.classList.toggle("expanded");
  });

  // Personalized stress-buster tips (excluding Better Sleep)
  const tips = {
    art: "ðŸŽ¨ Try pencil sketching, doodling, or any creative craft. Creativity relaxes your mind.",
    meditation: "ðŸ§˜ Spend 5 minutes focusing on your breath. Mindfulness calms anxiety.",
    exercise: "ðŸƒ A 15-min walk, stretch, or light exercise can boost your mood instantly.",
    music: "ðŸŽ¶ Listen to a calm playlist or favorite songs. Music therapy reduces stress.",
    social: "ðŸ‘¥ Chat with a friend or join a study group. Social connections relieve stress.",
    hobby: "ðŸ“š Engage in a hobby like reading, gaming, or coding. Doing what you love relaxes you."
  };

  // Populate dropdown
  const activitySelect = document.getElementById("activitySelect");
  Object.keys(tips).forEach(key => {
    const option = document.createElement('option');
    option.value = key;
    option.textContent = key === "art" ? "ðŸŽ¨ Creative Activities" :
                          key === "meditation" ? "ðŸ§˜ Mindfulness / Meditation" :
                          key === "exercise" ? "ðŸƒ Physical Activity" :
                          key === "music" ? "ðŸŽ¶ Listening to Music" :
                          key === "social" ? "ðŸ‘¥ Social Interaction" :
                          key === "hobby" ? "ðŸ“š Personal Hobby" : "";
    activitySelect.appendChild(option);
  });

  // Show tips for multiple selected activities
  activitySelect.addEventListener("change", function() {
    const selected = Array.from(this.selectedOptions).map(o => o.value);
    const tipsDiv = document.getElementById("activityTip");
    tipsDiv.innerHTML = selected.length ? selected.map(opt => tips[opt]).join('<br>') : '';
    localStorage.setItem("preferredActivities", JSON.stringify(selected));
  });

  // Load saved activities
  const savedActivities = JSON.parse(localStorage.getItem("preferredActivities") || "[]");
  if (savedActivities.length) {
    Array.from(activitySelect.options).forEach(option => {
      if (savedActivities.includes(option.value)) option.selected = true;
    });
    document.getElementById("activityTip").innerHTML = savedActivities.map(opt => tips[opt]).join('<br>');
  }

  // Daily coping tips
  const dailyTips = [
    "Take a 10-minute mindful walk today.",
    "Write down 3 things youâ€™re grateful for.",
    "Drink a glass of water slowly and breathe deeply.",
    "Declutter a small space around you.",
    "Do a quick doodle or sketch without judgment."
  ];
  const dailyTipEl = document.getElementById('dailyTip');
  function getRandomTip() {
    const lastTip = localStorage.getItem('lastDailyTip');
    let tip;
    do { tip = dailyTips[Math.floor(Math.random() * dailyTips.length)]; }
    while (tip === lastTip && dailyTips.length > 1);
    localStorage.setItem('lastDailyTip', tip);
    return tip;
  }
  dailyTipEl.textContent = getRandomTip();

  // Therapy cards (dynamic with details)
  const therapies = [
    { icon:'fas fa-brain', title:'Cognitive Behavioral Therapy (CBT)', desc:'Structured therapy to change negative thought patterns.', details:['Identify negative thoughts','Challenge and reframe them','Practice goal-oriented tasks'] },
    { icon:'fas fa-users', title:'Group Therapy', desc:'Share experiences and build coping strategies.', details:['Participate in discussions','Learn from peers','Guided exercises by therapist'] },
    { icon:'fas fa-heart', title:'Mindfulness & Meditation', desc:'Reduces stress through awareness techniques.', details:['Breathing exercises','Guided meditation','Focus on present moment'] },
    { icon:'fas fa-bed', title:'Sleep & Relaxation', desc:'Improve mental health with routines.', details:['Maintain sleep schedule','Limit screen time before bed','Relaxation exercises'] },
    { icon:'fas fa-dumbbell', title:'Physical Activity & Lifestyle', desc:'Exercise, nutrition, and sleep for resilience.', details:['Regular exercise','Healthy meals','Consistency in daily routine'] }
  ];

  const container = document.getElementById('therapyCardsContainer');
  therapies.forEach(therapy => {
    const div = document.createElement('div');
    div.className = 'therapy-card';
    div.innerHTML = `
      <i class="${therapy.icon}"></i>
      <div>
        <h4>${therapy.title}</h4>
        <p>${therapy.desc}</p>
        <div class="details">
          <ul>
            ${therapy.details.map(item => `<li>${item}</li>`).join('')}
          </ul>
        </div>
      </div>
    `;
    container.appendChild(div);
  });

  // Toggle details on card click
  container.addEventListener('click', (e) => {
    const card = e.target.closest('.therapy-card');
    if (!card) return;
    const details = card.querySelector('.details');
    if (!details) return;
    // Optional: Close other cards
    document.querySelectorAll('.therapy-card .details').forEach(d => {
      if (d !== details) d.style.display = 'none';
    });
    details.style.display = details.style.display === 'block' ? 'none' : 'block';
  });
</script>

</body>
</html>
